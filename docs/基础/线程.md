---
title: 线程
icon: material/spider-thread
comments: true
---

## 多进程

在Python中, 我们可以利用多种方法在父进程中创建子进程. 当我们用`python`命令执行了一个`.py`文件的时候, 就创建了一个进程, 在这个`.py`文件中, 我们通过一些手段又创建了一些进程, 这些进程就被称为子进程. 

???+ tip "Tip"

    - 父进程是创建子进程的进程
    - 子进程继承了父进程的环境变量, 但是无法直接访问父进程的变量、函数或者其他资源

        ??? example "例子"

            定义:

            ```py
            import os
            import subprocess

            # 设置父进程的环境变量
            os.environ['MY_VAR'] = 'Hello from parent process!'

            # 启动子进程，运行命令 'printenv MY_VAR' 以打印环境变量 MY_VAR 的值
            process = subprocess.Popen(['printenv', 'MY_VAR'], stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)

            # 获取子进程的输出
            stdout, stderr = process.communicate()

            # 打印子进程的输出
            print('STDOUT:', stdout) 
            ```

            输出:

            ```
            $ python main.py
            Hello from parent process!
            ```
                       
    - 如果子进程需要与父进程共享某些数据, 可以使用各种进程间通信机制, 如管道、队列、共享内存等
    - 子进程有自己独立的地址空间, 文件描述符表, 栈等资源

### `os`模块

`os`模块的`fork()`函数适用于Unix/Linux系统的低级进程创建, 直接调用系统的`fork()`接口, 适用于简单的子进程创建, 但是不提供高级的通信和同步机制.

### `subprocess`模块

`subprocess`模块适用于启动和管理外部命令行子进程, 能够和外部命令行子进程通过`communicate()`函数实现进程通信, 提供了发出`stdin`和接收`stdout`, `stderr`的功能. 

### `multiprocessing`模块

`multiprocessing`模块适用于并行处理和多进程编程, 提供了丰富的进程间通信和同步机制, 支持跨平台. 

### 进程池

### 进程间通信

[^1]: 多进程. (n.d.). Retrieved June 16, 2024, from https://www.liaoxuefeng.com/wiki/1016959663602400/1017628290184064
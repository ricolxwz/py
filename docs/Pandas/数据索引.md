---
title: 数据索引
icon: material/dice-multiple-outline
comments: true
---

???+ info "信息"

    - 默认省略导入

        - `import numpy as np`
        - `import pandas as pd`

    - 缩写

        - DataFrame缩写为"DF"
        - Series缩写为"SE"

    - 默认使用数据集: [learn_pandas](https://share.ricolxwz.io/learn_pandas.csv)

## 索引器

### DF的列索引

???+ info "信息"

    已经导入:

    ```
    df = pd.read_csv('data/learn_pandas.csv', usecols=['School', 'Grade', 'Name', 'Gender', 'Weight', 'Transfer'])
    ```

#### 单个索引

通过`[列名]`或者`.列名`可以取出单个索引对应的列, 返回值为SE. 

???+ example "例子"

    ```
    [1]: df['Name'].head()
    0      Gaopeng Yang
    1    Changqiang You
    2           Mei Sun
    3      Xiaojuan Sun
    4       Gaojuan You
    Name: Name, dtype: object
    [2]: df.Name.head()
    0      Gaopeng Yang
    1    Changqiang You
    2           Mei Sun
    3      Xiaojuan Sun
    4       Gaojuan You
    Name: Name, dtype: object
    ```

##### 多个索引

通过`[列名组成的列表]`可以取出多个索引对应的列, 返回值为DF.

???+ example "例子"

    ```
    [1]: df[['Gender', 'Name']].head()
    x	Gender	Name
    0	Female	Gaopeng Yang
    1	Male	Changqiang You
    2	Male	Mei Sun
    3	Female	Xiaojuan Sun
    4	Male	Gaojuan You
    ```

### SE的行索引

???+ info "信息"

    已经生成:

    ```
    s = pd.Series([1, 2, 3, 4, 5, 6], index=['a', 'b', 'a', 'a', 'a', 'c'])
    ```

#### 以字符串为索引的SE

##### 单个索引

通过`[item]`可以取出单个索引对应的元素.

- 如果SE中只有单个值和该索引对应, 则返回这个标量值
- 如果SE中有多个值和该索引对应, 则返回一个SE

???+ example "例子"

    ```
    [1]: s['a']
    a    1
    a    3
    a    4
    a    5
    dtype: int64
    [2]: s['b']
    2
    ```

##### 多个索引 

通过`[item的列表]`可以取出多个索引对应的元素.

???+ example "例子"

    ```
    [1]: s[['c', 'b']]
    c    6
    b    2
    dtype: int64
    ```

###### 取出两个索引之间的元素

可以使用切片. 

???+ warning "注意"

    - 这里的切片与NumPy的[切片](/NumPy/数组索引/#切片索引)有一点不同, 会包含两个端点
    - 这两个索引在整个索引中必须唯一

        ???+ tip "Tip"

            如果这两个索引的值在整个索引中存在重复, 那么需要经过排序才能使用切片.

            ???+ example "例子"

                ```
                [1]: try:
                        s['a': 'b']
                     except Exception as e:
                        Err_Msg = e
                [2]: Err_Msg
                KeyError("Cannot get left slice bound for non-unique label: 'a'")
                [3]: s.sort_index()['a':'b']
                a    1
                a    3
                a    4
                a    5
                b    2
                dtype: int64
                ```

???+ example "例子"

    ```
    [1]: s['c': 'b': -2]
    c    6
    a    4
    b    2
    dtype: int64
    ```

#### 以整数为索引的SE


---
title: 数据结构
icon: material/data-matrix
comments: true
---

???+ info "信息"

    - 默认省略导入`import pandas as pd`.
    
Pandas中具有两种基本的数据结构, 存储一维数据的Series和二维数据的DataFrame.

???+ tip "Tip"

    Series和DataFrame和NumPy中的[结构化数组](/NumPy/结构化数组)类似, 功能上, 前者远胜后者.

## Series

Series一般由四部分组成, 分别是序列的值, 索引, 存储类型, 序列的名字. 其中索引也可以指定它的名字, 默认为空.

???+ example "例子"

    ```
    [1]: s = pd.Series(data=[100, 'a', {'dic1': 5}],
                       index=pd.Index(['id1', 20, 'third'], name='my_index'),
                       dtype='object',
                       name="my_name")
    [2]: s
    my_index
    id1              100
    20                 a
    third    {'dic1': 5}
    Name: my_name, dtype: object
    ```
    
对于这些属性, 可以通过`.`的方式获取.

???+ example "例子"

    ```
    [1]: s = pd.Series(data=[100, 'a', {'dic1': 5}],
                       index=pd.Index(['id1', 20, 'third'], name='my_index'),
                       dtype='object',
                       name="my_name")
    [2]: s.values
    array([100, 'a', {'dic1': 5}], dtype=object)
    [3]: s.index
    Index(['id1', 20, 'third'], dtype='object', name='my_index')
    [4]: s.dtype
    dtype('O')
    [5]: s.name
    'my_name'
    [6]: s.shape
    (3,)
    [7]: s['third']
    {'dic1': 5}
    ```
    
## DataFrame

DataFrame在Series的基础上增加了一个列索引, 一个DataFrame可以由二维数组和行列索引来构造.

- `index`: 行索引
- `columns`: 列索引

???+ example "例子"

    ```
    [1]: data = [[1, 'a', 1.2], [2, 'b', 2.2], [3, 'c', 3.2]]
    [2]: df = pd.DataFrame(data=data,
                          index=['row_%d'%i for i in range(3)],
                          columns=['col_0', 'col_1', 'col_2'])
    [3]: df
           col_0 col_1  col_2
    row_0      1     a    1.2
    row_1      2     b    2.2
    row_2      3     c    3.2
    ```

更多的时候会采取列索引名到数据的映射同时再加上行索引来构造DataFrame.

???+ example "例子"

    ```
    [1]: df = pd.DataFrame(data = {'col_0': [1,2,3], 'col_1':list('abc'),
                                   'col_2': [1.2, 2.2, 3.2]},
                           index = ['row_%d'%i for i in range(3)])
    [2]: df
           col_0 col_1  col_2
    row_0      1     a    1.2
    row_1      2     b    2.2
    row_2      3     c    3.2
    ```
    
由于这种映射关系, 可以通过`<col_name>`或`<col_list>`取出对应的列或多个列组成的表, 结果分别为Series和DataFrame.

???+ example "例子"

    ```
    [1]: df = pd.DataFrame(data = {'col_0': [1,2,3], 'col_1':list('abc'),
                                   'col_2': [1.2, 2.2, 3.2]},
                           index = ['row_%d'%i for i in range(3)])
    [2]: df['col_0']
    row_0    1
    row_1    2
    row_2    3
    Name: col_0, dtype: int64
    [3]: df[['col_0', 'col_1']]
           col_0 col_1
    row_0      1     a
    row_1      2     b
    row_2      3     c
    ```
    
与Series类似, 同样可以访问属性.

???+ example "例子"

    ```
    [1]: df = pd.DataFrame(data = {'col_0': [1,2,3], 'col_1':list('abc'),
                                   'col_2': [1.2, 2.2, 3.2]},
                           index = ['row_%d'%i for i in range(3)])
    [2]: df.values
    array([[1, 'a', 1.2],
           [2, 'b', 2.2],
           [3, 'c', 3.2]], dtype=object)
    [3]: df.index
    Index(['row_0', 'row_1', 'row_2'], dtype='object')
    [4]: df.colums
    Index(['col_0', 'col_1', 'col_2'], dtype='object')
    [5]: df.dtypes # 返回的是值于相应列数据类型的Series
    col_0      int64
    col_1     object
    col_2    float64
    dtype: object
    [6]: df.shape
    (3, 3)
    ```